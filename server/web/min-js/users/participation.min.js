let userID = ''; $(document).ready(() => {
  const t = $('#userTable').DataTable({ processing:!0,serverSide:!0,scrollX:!0,stateSave:!0,ajax:{ url:'../api/users',data:function (t){
    t.fields = 'username studyID inStudy';
  } },columns:[{ data:'username' },{ data:'studyID',render:function (t,e,a){
    return a.studyID ? a.studyID : '<i>No Study ID Assigned</i>';
  } },{ data:'inStudy',render:function (t,e,a){
    return a.inStudy ? '<h4><span class="badge badge-success">In Study</span></h4>' : '<h4><span class="badge badge-danger">Not In Study</span></h4>';
  } }] }); $('#roleCard').hide(),$('#userTable tbody').on('click','tr',function (){
    if ($(this).hasClass('selected')){
      $(this).removeClass('selected');
    }
    else {
      t.$('tr.selected').removeClass('selected'),$(this).addClass('selected'); const e = t.row(this).data(); $('#roleCard').show(),$('#username').text(e.username),$('#studyID').val(e.studyID),e.inStudy ? ($('#in').prop('checked',!0),$('#inButton').addClass('active btn-primary').removeClass('btn-light'),$('#out').prop('checked',!1),$('#outButton').addClass('btn-light').removeClass('active btn-primary')) : ($('#out').prop('checked',!0),$('#outButton').addClass('active btn-primary').removeClass('btn-light'),$('#in').prop('checked',!1),$('#inButton').addClass('btn-light').removeClass('active btn-primary')),userID = e._id;
    }
  }),$('#inButton').click(() => {
    $('#in').prop('checked',!0),$('#inButton').addClass('active btn-primary').removeClass('btn-light'),$('#out').prop('checked',!1),$('#outButton').addClass('btn-light').removeClass('active btn-primary');
  }),$('#outButton').click(() => {
    $('#out').prop('checked',!0),$('#outButton').addClass('active btn-primary').removeClass('btn-light'),$('#in').prop('checked',!1),$('#inButton').addClass('btn-light').removeClass('active btn-primary');
  }),$('#update').click(() => {
    let e = !0; $('input:radio[name =\'inStudy\']:checked').val() == 'out' && (e = !1); const a = { studyID:Number($('#studyID').val()),inStudy:e }; $.ajax({ url:'../api/users/' + userID + '/participation',type:'PUT',data:a,success:function (e){
      t.ajax.reload();
    },error:function (t){
      errorAlert(t.responseJSON.message);
    } });
  });
});
