function restore(e){var t=$("#restore"+e);"Restore"===t.text()?t.text("Are You Sure?"):$.ajax({url:"../api/backups/"+e,type:"PUT",success:function(e){successAlert("Backup Restored"),table.ajax.reload()},error:function(e){errorAlert(e.responseJSON.message)}})}function deleteDoc(e){var t=$("#delete"+e);"Delete"===t.text()?t.text("Are You Sure?"):$.ajax({url:"../api/backups/"+e,type:"DELETE",success:function(e){successAlert("Backup Deleted"),table.ajax.reload()},error:function(e){errorAlert(e.responseJSON.message)}})}function backup(){$.ajax({url:"../api/backups",type:"POST",success:function(e){successAlert("Backup Created"),table.ajax.reload()},error:function(e){errorAlert(e.responseJSON.message)}})}function clean(){$.ajax({url:"../api/backups/refresh",type:"GET",success:function(e){successAlert("Backup Synced"),table.ajax.reload()},error:function(e){errorAlert(e.responseJSON.message)}})}var table;$(document).ready(function(){table=$("#table").DataTable({processing:!0,serverSide:!0,scrollX:!0,scrollY:"500px",scrollCollapse:!0,stateSave:!0,ajax:{url:"../api/backups",data:function(e){e.fields="backupId zip s3 time"}},columns:[{data:"_id",defaultContent:""},{data:"backupId",defaultContent:""},{data:"zip",render:function(e,t,a){return a.zip?'<span class="badge badge-success">Completed</span>':'<span class="badge badge-danger">Failed</span>'}},{data:"time",render:function(e,t,a){var r=new Date(a.time);return r.toDateString()+" "+r.toLocaleTimeString("en-us")}},{data:"_id",render:function(e,t,a){return'<button class="btn btn-primary" id="restore'+a._id+'" onclick="restore(\''+a._id+"')\">Restore</button>"}},{data:"_id",render:function(e,t,a){return'<button class="btn btn-danger" id="delete'+a._id+'" onclick="deleteDoc(\''+a._id+"')\">Delete</button>"}}]})});
