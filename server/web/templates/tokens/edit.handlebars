<div class="container-fluid h-100">
  <div class="row h-100">
    {{>dashboardNav}}
    <div class="col-sm-9 col-md-10">
      <div class="container" style="padding-top: 60px">
        <h3>Edit Token</h3>
        <hr>
        <div class="card">
          <div class="container" style="padding-top: 20px; padding-bottom: 20px">
            <form id="form">
              <div id="formFields"></div>
              <button id="update" type="submit" class="btn btn-primary">Update</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript" src="../../public/scripts/tokens/edit.js"></script>
<script>
  joiFormValue('name', '{{token.name}}');
  $('#update').click((event) => {
    event.preventDefault();
    const values = {};
    $.each($('#form').serializeArray(), (i, field) => {
      values[field.name] = field.value;
    });
    console.log(values);
    $.ajax({
      type: 'PUT',
      url: '../api/tokens/{{token._id}}',
      data: values,
      success: function (result) {
        window.location = '../tokens'
      },
      error: function (result) {
        errorAlert(result.responseJSON.message);
      }
    });
  });
</script>
